{% extends "accounts/base.html" %}
{% block title %}アカウント作成 - Lyric App{% endblock %}

{% block content %}
{% if success is not None %}
    <script>
        function amazingSample() {
            {% if success %}
                swal("アカウントが作成されました！", "ログインしてください。", "success")
                .then(() => {
                    window.location.href = "{% url 'signin' %}";  // ← ログインページへ遷移
                });
            {% else %}
                swal("アカウントの作成に失敗しました。", "{{ error_message|default:'もう一度お試しください。' }}", "error");
            {% endif %}
        }
        window.onload = amazingSample;
    </script>
{% endif %}


<h2>アカウント作成</h2>
<form method="post" action="{% url 'signup_view' %}">
    {% csrf_token %}
    <input type="text" name="username" placeholder="ユーザー名" required>
    <input type="email" name="email" placeholder="メールアドレス" required>
    <input type="password" name="password" placeholder="パスワード" required>
    <button type="submit">登録</button>
</form>
<p>すでにアカウントをお持ちですか？ <a href="{% url 'signin' %}">ログイン</a></p>
{% endblock %}
